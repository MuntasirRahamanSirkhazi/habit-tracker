{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/my%20pc/OneDrive/Desktop/habit%20tarcker/habittracker/src/lib/supabaseClient.js"],"sourcesContent":["// src/lib/supabaseClient.js\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAC5B;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/my%20pc/OneDrive/Desktop/habit%20tarcker/habittracker/src/app/profile/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { supabase } from \"../../lib/supabaseClient\";\r\n\r\nexport default function ProfilePage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState({ name: \"\", email: \"\", id: \"\" });\r\n  const [stats, setStats] = useState({ habits: 0, completed: 0, pending: 0 });\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [editMsg, setEditMsg] = useState(\"\");\r\n\r\n  // Fetch user profile and stats\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      const { data: { user: authUser } } = await supabase.auth.getUser();\r\n      if (!authUser) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n      // Fetch user profile from users table\r\n      const { data } = await supabase\r\n        .from(\"users\")\r\n        .select(\"name, email\")\r\n        .eq(\"email\", authUser.email)\r\n        .single();\r\n      setUser({ name: data?.name || \"\", email: data?.email || \"\", id: authUser.id });\r\n\r\n      // Fetch habit stats\r\n      const { count: habitsCount } = await supabase\r\n        .from(\"habit\")\r\n        .select(\"*\", { count: \"exact\", head: true })\r\n        .eq(\"user_id\", authUser.id);\r\n      const { count: completedCount } = await supabase\r\n        .from(\"habit\")\r\n        .select(\"*\", { count: \"exact\", head: true })\r\n        .eq(\"user_id\", authUser.id)\r\n        .eq(\"status\", \"Completed\");\r\n      const { count: pendingCount } = await supabase\r\n        .from(\"habit\")\r\n        .select(\"*\", { count: \"exact\", head: true })\r\n        .eq(\"user_id\", authUser.id)\r\n        .eq(\"status\", \"Pending\");\r\n      setStats({\r\n        habits: habitsCount || 0,\r\n        completed: completedCount || 0,\r\n        pending: pendingCount || 0,\r\n      });\r\n    };\r\n    fetchProfile();\r\n  }, [router, editMsg]);\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    router.push(\"/\");\r\n  };\r\n\r\n  const handleEditProfile = async (e) => {\r\n    e.preventDefault();\r\n    setEditMsg(\"\");\r\n    if (!newName.trim()) {\r\n      setEditMsg(\"Name cannot be empty.\");\r\n      return;\r\n    }\r\n    // Get current user\r\n    const { data: { user: authUser } } = await supabase.auth.getUser();\r\n    if (!authUser) return;\r\n\r\n    // 1. Update the name in users table\r\n    const { error: updateError } = await supabase\r\n      .from(\"users\")\r\n      .update({ name: newName })\r\n      .eq(\"email\", authUser.email);\r\n\r\n    // 2. Insert into editname table for history\r\n    await supabase\r\n      .from(\"editname\")\r\n      .insert([{ user_id: authUser.id, new_name: newName }]);\r\n\r\n    if (updateError) {\r\n      setEditMsg(\"Failed to update name.\");\r\n    } else {\r\n      setEditMsg(\"Name updated!\");\r\n      setShowEdit(false);\r\n      setNewName(\"\");\r\n      // The useEffect will refetch and show the new name\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\r\n      {/* Navbar */}\r\n      <nav className=\"bg-blue-600 px-8 py-4 flex items-center justify-between\">\r\n        <span className=\"text-3xl font-bold text-white\">HabitTracker</span>\r\n        <div className=\"space-x-8\">\r\n          <button\r\n            className=\"text-white font-semibold text-lg hover:underline\"\r\n            onClick={() => router.push(\"/habits\")}\r\n          >\r\n            Dashboard\r\n          </button>\r\n          <button\r\n            className=\"text-white font-semibold text-lg hover:underline\"\r\n            onClick={() => router.push(\"/profile\")}\r\n          >\r\n            Profile\r\n          </button>\r\n          <button\r\n            className=\"text-white font-semibold text-lg hover:underline\"\r\n            onClick={handleLogout}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Profile Card */}\r\n      <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n        <div className=\"bg-white rounded-2xl shadow p-10 w-full max-w-2xl flex flex-col items-center mt-10 mb-10\">\r\n          <div className=\"flex flex-col items-center mb-6\">\r\n            <div className=\"w-36 h-36 rounded-full border-4 border-blue-600 flex items-center justify-center mb-2\">\r\n              <span className=\"text-gray-700 text-lg\">User Profile</span>\r\n            </div>\r\n            <h2 className=\"text-3xl font-bold mt-2 mb-1\">{user.name}</h2>\r\n            <p className=\"text-gray-500 text-lg\">{user.email}</p>\r\n          </div>\r\n          <div className=\"flex justify-center gap-16 mt-6 mb-2\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <span className=\"text-blue-600 text-2xl font-bold\">{stats.habits}</span>\r\n              <span className=\"text-gray-500 text-lg\">Habits</span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center\">\r\n              <span className=\"text-blue-600 text-2xl font-bold\">{stats.completed}</span>\r\n              <span className=\"text-gray-500 text-lg\">Completed</span>\r\n            </div>\r\n            <div className=\"flex flex-col items-center\">\r\n              <span className=\"text-blue-600 text-2xl font-bold\">{stats.pending}</span>\r\n              <span className=\"text-gray-500 text-lg\">Pending</span>\r\n            </div>\r\n          </div>\r\n          <button\r\n            className=\"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-2 rounded mt-6\"\r\n            onClick={() => setShowEdit(true)}\r\n          >\r\n            Edit Profile\r\n          </button>\r\n          {editMsg && (\r\n            <div className=\"mt-4 text-center text-blue-600 font-semibold\">{editMsg}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Edit Profile Modal */}\r\n      {showEdit && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50\">\r\n          <form\r\n            onSubmit={handleEditProfile}\r\n            className=\"bg-white rounded-xl shadow-lg p-8 flex flex-col items-center\"\r\n          >\r\n            <h3 className=\"text-2xl font-bold mb-4\">Edit Name</h3>\r\n            <input\r\n              type=\"text\"\r\n              className=\"border rounded px-4 py-2 mb-4 w-64\"\r\n              placeholder=\"Enter new name\"\r\n              value={newName}\r\n              onChange={(e) => setNewName(e.target.value)}\r\n              required\r\n            />\r\n            <div className=\"flex gap-4\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-2 rounded\"\r\n              >\r\n                Save\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold px-6 py-2 rounded\"\r\n                onClick={() => setShowEdit(false)}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Footer */}\r\n      <footer className=\"bg-blue-600 text-white py-4 text-center\">\r\n        &copy; 2025 HabitTracker. All rights reserved.\r\n      </footer>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}